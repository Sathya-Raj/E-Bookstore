{% extends 'basedashboard.html' %}

{% block homelogo %}
<a hef="/Reader"><a href="/Reader" style="color: rgb(240, 85, 64); "><h3><i class="fas fa-home"></i></h3></a></a>
{% endblock homelogo %}

{% block navi %}
<ul>
    <li ><a href="/Rdrdashboard"><i class="fas fa-user"></i></i><span class="hidden-xs hidden-sm">Account</span></a></li>
    <li><a href="/Rdrdashboard/wishlist"><i class="fas fa-heart" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Wishlist</span></a></li>
    <li><a href="/Rdrdashboard/cart"><i class="fas fa-shopping-cart"></i><span class="hidden-xs hidden-sm">Cart</span></a></li>
    <li class="active"><a href="/Rdrdashboard/settings"><i class="fa fa-cog" aria-hidden="true"></i><span class="hidden-xs hidden-sm">Settings</span></a></li>
    <li><a href="/logout"><i class="fas fa-sign-out-alt"aria-hidden="true"></i><span class="hidden-xs hidden-sm">Logout</span></a></li>
    </ul>
{% endblock navi %}

{% block dashbody %}
<h1>Hello, {{username}}</h1>
<h4 class="text-center bg-danger text-white">Change Username or Password</h4>
<br> </br>
<form action='/Rdrdashboard/settings' method="post">

    <div class="form-group">
      <label for="exampleInputEmail1">Email address</label>
      <p> {{email}} </p>
    </div>

    <div class="form-group">
      <label for="password">Enter Password</label>
      <input type="password" class="form-control" required  placeholder="current Password" name='oldpassword' required >
    </div>

    <div class="form-group">
      <label for="username">New Username</label>
      <input type="text" class="form-control" id="username" placeholder="{{username}}" name='username' >
    </div>

    <div class="form-group">
      <label for="password">New Password</label>
      <input type="password" class="form-control"  placeholder="New password" name='newpassword'>
    </div>

    <div class="form-check">
      <input type="checkbox" class="form-check-input" id="exampleCheck1" required>
      <label class="form-check-label" for="exampleCheck1">Confirm change in authentication details</label>
    </div>
    <button type="submit" class="btn btn-primary">Update</button>
    <div>
      {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
                {% if category == "warning" %}
                  <div class="alert danger">
                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>  
                  <strong>Input either new username or new password</strong>
                   </div>
                {% elif category == "danger" %}
                  <div class="alert warning">
                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>  
                  <strong>Incorrect password</strong>
                   </div>
                {% else %}
                  <div class="alert success">
                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>  
                  <strong>Details updated!</strong>
                  </div>
                {% endif %}
            {% endfor %}
          {% endif %}
      {% endwith %}
    </div>
  </form>
{% endblock dashbody %}